
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Queue Highlights</title>
    <script type='text/javascript' src="http://code.angularjs.org/1.1.5/angular.min.js"></script>
    <script src="angtable.js"></script>
    <link rel="stylesheet" type="text/css" href="css/queueview.css">

</head>
<body>
  <div ng-app="myApp">
<div ng-controller="Summary" ng-init="loadData()">
<table class="statTable">
    <tr>
        <th>Time <a ng-click="loadData()">Reload</a></th>
        <th ng-repeat="(name,_) in summaries" ng-bind="name"></th>
    </tr>
    <tr>
	<td ng-bind="timeStamp"></td>
        <td ng-repeat="queue in summaries" ng-class="queue.latency_20|summaryColor">{{queue.total_count}}<br>{{queue.latency_20 | timeCalc}}</td>
    </tr>
</table>
</div>
<div ng-controller="Dynamic" id="queueTable">
    <div>
        <label for=queueList>Queue:</label>
        <select ng-init="getQueueList()" id=queueList ng-model="queueListSelect" ng-options="name for (name,shortname) in queueList" ng-change="changeRefresh()">
            <option value=''>Enterprise All</option>
        </select>
        <label for=specialFilter>Filters:</label>
        <select ng-init="getFilterList()" id=specialFilter ng-model="filterListSelect" ng-options="filter.name for filter in filterList" ng-change="changeRefresh()">
            <option value="">None</option>
        </select>
	<span ng-repeat="parameter in filterListSelect.parameters">
		<label for=filterOpt>{{ parameter.name }}</label><input id=filterOpt ng-model="parameter.value" ng-change="changeRefresh()">
	</span>
        <label for=timeout>Timeout:</label><input id=timeout size=2 value="3" ng-model="refreshTime" ng-change="changeRefresh()">
        <span ng-show="gettingFeedback">Loading</span>
    </div>
<table ng-init="loadFeedback()">
    <tr>
        <th class="ticketColumnId">Ticket</th>
        <th class="ticketColumnAge">Age</th>
        <th class="ticketColumnScore">Score</th>
        <th class="ticketColumnAccount">Account</th>
        <th class="ticketColumnSubject">Subject</th>
        <th class="ticketColumnTeam">Team</th>
        <th class="ticketColumnStatus">Status</th>
        <th class="ticketColumnPlatforms">Platforms</th>
    </tr>
    <tr ng-repeat="feedback in feedbacks">
        <td ng-bind-html-unsafe="feedback.ticket_link"></td>
        <td ng-bind="feedback.age"></td>
        <td ng-bind="feedback.score"></td>
        <td ng-bind-html-unsafe="feedback.account_link"></td>
        <td ng-bind="feedback.subject"></td>
        <td ng-bind="feedback.team"></td>
        <td ng-bind-html-unsafe="feedback.status_"></td>
        <td ng-bind-html-unsafe="feedback.platforms_"></td>
    </tr>
</table>
</div>

</body>
</html>
